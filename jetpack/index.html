<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>flowchart.js · Playground</title>
        <style type="text/css">
          .end-element { fill : #FFCCFF; }
        </style>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="http://flowchart.js.org/flowchart-latest.js"></script>
        <script>

            window.onload = function () {
                var btn = document.getElementById("run"),
                    cd = document.getElementById("code"),
                    chart;

                (btn.onclick = function () {
                    var code = cd.value;

                    if (chart) {
                      chart.clean();
                    }

                    chart = flowchart.parse(code);
                    chart.drawSVG('canvas', {
                      // 'x': 30,
                      // 'y': 50,
                      'line-width': 3,
                      'maxWidth': 3,//ensures the flowcharts fits within a certian width
                      'line-length': 50,
                      'text-margin': 10,
                      'font-size': 14,
                      'font': 'normal',
                      'font-family': 'Helvetica',
                      'font-weight': 'normal',
                      'font-color': 'black',
                      'line-color': 'black',
                      'element-color': 'black',
                      'fill': 'white',
                      'yes-text': 'yes',
                      'no-text': 'no',
                      'arrow-end': 'block',
                      'scale': 1,
                      'symbols': {
                        'start': {
                          'font-color': 'red',
                          'element-color': 'green',
                          'fill': 'yellow'
                        },
                        'end':{
                          'class': 'end-element'
                        }
                      },
                      'flowstate' : {
                        'past' : { 'fill' : '#CCCCCC', 'font-size' : 12},
                        'current' : {'fill' : 'yellow', 'font-color' : 'red', 'font-weight' : 'bold'},
                        'future' : { 'fill' : '#FFFF99'},
                        'request' : { 'fill' : 'blue'},
                        'invalid': {'fill' : '#444444'},
                        'approved' : { 'fill' : '#58C4A3', 'font-size' : 12, 'yes-text' : 'APPROVED', 'no-text' : 'n/a' },
                        'rejected' : { 'fill' : '#C45879', 'font-size' : 12, 'yes-text' : 'n/a', 'no-text' : 'REJECTED' }
                      }
                    });

                    $('[id^=sub1]').click(function(){
                      alert('info here');
                    });
                })();

            };

            function myFunction(event, node) {
              console.log("You just clicked this node:", node);
            }
            
        </script>
    </head>
    <body>
        <div>
            <textarea id="code" style="width: 100%;" rows="11">
              op2=>operation: from vpython import *
              op4=>operation: from time import sleep, time
              op6=>operation: from random import randint
              op8=>operation: from settings import *
              op10=>operation: scene = canvas(width=1500, height=800, autoscale=False)
              op12=>operation: camera_obj = box(pos=vector(0, 0, 0), size=vector(1, 1, 1), visible=False)
              sub14=>subroutine: scene.camera.follow(camera_obj)
              st17=>start: start init
              io19=>inputoutput: input: 
              op22=>operation: global pause_text
              op24=>operation: global plane
              op26=>operation: global player
              op28=>operation: global keys_pressed
              op30=>operation: global time_text
              op32=>operation: global s1
              op34=>operation: global s2
              op36=>operation: pause_text = 0
              op38=>operation: plane = {'up': box(pos=vector(0, 9, 0), size=vector(30, 0.2, 0), color=color.gray(0.1)), 'down': box(pos=vector(0, (- 9), 0), size=vector(30, 0.2, 0), color=color.gray(0.1)), 'left': box(pos=vector((- 15), 0, 0), size=vector(0.2, 18, 0), color=color.gray(0.1)), 'right': box(pos=vector(15, 0, 0), size=vector(0.2, 18, 0), color=color.gray(0.1))}
              op40=>operation: player = box(pos=vector(0, 0, 0), size=vector(0.7, 1.4, 0.7), color=color.purple, acc=vector(0, 0, 0), vel=vector(0, 0, 0), make_trail=False, trail_type='curve', interval=5, retain=10, trail_color=color.orange)
              op42=>operation: keys_pressed = wtext(pos=scene.caption_anchor)
              op44=>operation: time_text = wtext(pos=scene.caption_anchor)
              op46=>operation: s1 = False
              op48=>operation: s2 = False
              e50=>end: end init
              st54=>start: start level_gen
              io56=>inputoutput: input: DIFF
              op59=>operation: obstacles = []
              cond62=>condition: for i in plane.values()
              op81=>operation: i.size.z = LENGTHS[(DIFF - 1)]
              cond84=>condition: if (DIFF == 1)
              op88=>operation: i.pos.z = ((- LENGTHS[(DIFF - 1)]) / 2)
              op92=>operation: i.pos.z -= LENGTHS[(DIFF - 2)]
              cond98=>condition: if (DIFF == 1)
              op102=>operation: prev = 0
              cond110=>operation: obstacles.append(sphere(pos=vector(randint(plane['left'].pos.x, plane['right'].pos.x), randint(plane['down'].pos.y, plane['up'].pos.y), (- i)), radius=DIFF, opacity=0.1, color=color.red)) while  i in range(prev, (prev + LENGTHS[(DIFF - 1)]), 8)
              e122=>end: end level_gen
              st126=>start: start pause
              io128=>inputoutput: input:
              cond132=>operation: pause_text = text(pos=vector(0, 0, player.pos.z), text='Press any button to continue') if  (not pause_text)
              sub142=>subroutine: scene.waitfor('keydown')
              op144=>operation: pause_text.visible = False
              sub146=>subroutine: sleep(0.1)
              e148=>end: end pause
              st152=>start: start detectBounds
              io154=>inputoutput: input:
              cond158=>condition: if ((player.pos.x - (player.size.x / 2)) < (plane['left'].pos.x + (plane['left'].size.x / 2)))
              op162=>operation: player.vel.x = 0
              op164=>operation: player.vel = (player.vel * 0.9)
              op166=>operation: player.pos.x = ((plane['left'].pos.x + (plane['left'].size.x / 2)) + (player.size.x / 2))
              cond172=>condition: if ((player.pos.x + (player.size.x / 2)) > (plane['right'].pos.x - (plane['right'].size.x / 2)))
              op176=>operation: player.vel.x = 0
              op178=>operation: player.vel = (player.vel * 0.9)
              op180=>operation: player.pos.x = ((plane['right'].pos.x - (plane['right'].size.x / 2)) - (player.size.x / 2))
              cond186=>condition: if ((player.pos.y + (player.size.y / 2)) > (plane['up'].pos.y - (plane['up'].size.y / 2)))
              op190=>operation: player.vel.y = (- 0.005)
              op192=>operation: player.vel = (player.vel * 0.9)
              op194=>operation: player.pos.y = ((plane['up'].pos.y - (plane['up'].size.y / 2)) - (player.size.y / 2))
              cond200=>condition: if ((player.pos.y - (player.size.y / 2)) < (plane['down'].pos.y + (plane['down'].size.y / 2)))
              op204=>operation: player.vel.y = (- 0.005)
              op206=>operation: player.vel = (player.vel * 0.9)
              op208=>operation: player.pos.y = ((plane['down'].pos.y + (plane['down'].size.y / 2)) + (player.size.y / 2))
              e213=>end: end detectBounds
              st217=>start: start fly
              io219=>inputoutput: input:
              cond223=>condition: if (' ' in k)
              op227=>operation: player.vel.y += 0.01
              op229=>operation: player.color = color.orange
              op231=>operation: player.make_trail = True
              cond243=>condition: if ('a' in k)
              op247=>operation: player.vel.x -= 0.005
              op249=>operation: player.color = color.blue
              e268=>end: end fly
              st272=>start: start move
              io274=>inputoutput: input: v
              op277=>operation: player.vel.z = (- v)
              e279=>end: end move
              st283=>start: start moveCamera
              io285=>inputoutput: input:
              op288=>operation: camera_obj.pos.z = player.pos.z
              op290=>operation: camera_obj.pos.x = (player.pos.x * 0.4)
              e292=>end: end moveCamera
              st296=>start: start main
              io298=>inputoutput: input:
              sub301=>subroutine: detectBounds()
              sub303=>subroutine: fly()
              cond306=>operation: move(0.5) if  s1
              cond317=>operation: move(0.2) if  s2
              op327=>operation: player.pos += player.vel
              sub329=>subroutine: moveCamera()
              e331=>end: end main
              cond335=>condition: if (__name__ == '__main__')
              sub339=>subroutine: init()
              op341=>operation: try:
                  start = text(text='Press any key to start', pos=vector(0, 5, 0))
                  scene.waitfor('keydown')
                  start.visible = False
                  t0 = time()
                  t = t0
                  while True:
                      rate(100)
                      t1 = (time() - t0)
                      '\n                Tiden uppdaterades fÃ¶r ofta vilket orsakade lagg\n            '
                      if (int(t) < int(t1)):
                          time_text.text = str(int(t1))
                      t = t1
                      k = keysdown()
                      keys_pressed.text = k
                      if (not s1):
                          level_gen(1)
                          s1 = True
                      if ((player.pos.z < (- LENGTHS[0])) and (not s2)):
                          level_gen(2)
                          s2 = True
                          s1 = False
                      if ('esc' in k):
                          pause()
                      main()
              except Exception as e:
                  print(e)
              cond254=>condition: if ('d' in k)
              op258=>operation: player.vel.x += 0.005
              op260=>operation: player.color = color.blue
              op264=>operation: player.vel.x = (player.vel.x * 0.994)
              op235=>operation: player.vel.y -= 0.005
              sub237=>subroutine: player.clear_trail()
              op239=>operation: player.make_trail = False
              op106=>operation: prev = LENGTHS[(DIFF - 2)]
              
              op2->op4
              op4->op6
              op6->op8
              op8->op10
              op10->op12
              op12->sub14
              sub14->st17
              st17->io19
              io19->op22
              op22->op24
              op24->op26
              op26->op28
              op28->op30
              op30->op32
              op32->op34
              op34->op36
              op36->op38
              op38->op40
              op40->op42
              op42->op44
              op44->op46
              op46->op48
              op48->e50
              e50->st54
              st54->io56
              io56->op59
              op59->cond62
              cond62(yes)->op81
              op81->cond84
              cond84(yes)->op88
              op88->cond62
              cond84(no)->op92
              op92->cond62
              cond62(no)->cond98
              cond98(yes)->op102
              op102->cond110
              cond110->e122
              e122->st126
              st126->io128
              io128->cond132
              cond132->sub142
              sub142->op144
              op144->sub146
              sub146->e148
              e148->st152
              st152->io154
              io154->cond158
              cond158(yes)->op162
              op162->op164
              op164->op166
              op166->cond172
              cond172(yes)->op176
              op176->op178
              op178->op180
              op180->cond186
              cond186(yes)->op190
              op190->op192
              op192->op194
              op194->cond200
              cond200(yes)->op204
              op204->op206
              op206->op208
              op208->e213
              e213->st217
              st217->io219
              io219->cond223
              cond223(yes)->op227
              op227->op229
              op229->op231
              op231->cond243
              cond243(yes)->op247
              op247->op249
              op249->e268
              e268->st272
              st272->io274
              io274->op277
              op277->e279
              e279->st283
              st283->io285
              io285->op288
              op288->op290
              op290->e292
              e292->st296
              st296->io298
              io298->sub301
              sub301->sub303
              sub303->cond306
              cond306->cond317
              cond317->op327
              op327->sub329
              sub329->e331
              e331->cond335
              cond335(yes)->sub339
              sub339->op341
              cond243(no)->cond254
              cond254(yes)->op258
              op258->op260
              op260->e268
              cond254(no)->op264
              op264->e268
              cond223(no)->op235
              op235->sub237
              sub237->op239
              op239->cond243
              cond200(no)->e213
              cond186(no)->cond200
              cond172(no)->cond186
              cond158(no)->cond172
              cond98(no)->op106
              op106->cond110
            </textarea>
        </div>
        <div><button id="run" type="button">Run</button></div>
        <div id="canvas"></div>
    </body>
</html>